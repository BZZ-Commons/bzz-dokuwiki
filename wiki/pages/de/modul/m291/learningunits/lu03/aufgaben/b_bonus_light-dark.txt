===== LU03b - üöÄ Bonusauftrag: CSS-nativer Dark Mode =====

<WRAP center round box 80%>
**F√ºr wen ist das?** Sie haben alle Schritte abgeschlossen und m√∂chten tiefer einsteigen. Dieser Bonusauftrag zeigt Ihnen, wie modernes CSS den Dark Mode eleganter l√∂st ‚Äì ganz ohne JavaScript.
</WRAP>

In den Schritten 1‚Äì9 haben Sie den Dark Mode mit JavaScript und einer CSS-Klasse umgesetzt. Das funktioniert gut, hat aber einen Nachteil: Die Seite kennt die Systemeinstellung des Users nicht automatisch. Wer sein Betriebssystem auf Dark Mode gestellt hat, sieht trotzdem zuerst Light Mode ‚Äì bis er den Switch bet√§tigt.

Moderneres CSS bietet zwei Werkzeuge, die das eleganter l√∂sen:

  - Die Media Query ''%%@media (prefers-color-scheme: dark)%%'' liest die Systemeinstellung des Users aus.
  - Die CSS-Funktion ''%%light-dark()%%'' erlaubt es, beide Farbwerte direkt in einer Deklaration zu definieren.

Quelle und Vertiefung: [[https://www.bram.us/2023/10/09/the-future-of-css-easy-light-dark-mode-color-switching-with-light-dark/|The Future of CSS: Easy Light-Dark Mode Color Switching with light-dark() ‚Äì bram.us]]

==== Schritt A: Systemfarbe mit prefers-color-scheme auslesen ====

Ohne JavaScript l√§sst sich der Dark Mode √ºber eine Media Query aktivieren. Der Browser fragt dabei das Betriebssystem ab.

<WRAP center box round 80%>
<code css>
:root {
  --text-color: #333;
  --bg-color: #ffffff;
}

@media (prefers-color-scheme: dark) {
  :root {
    --text-color: #cccccc;
    --bg-color: #1a1a1a;
  }
}

body {
  color: var(--text-color);
  background-color: var(--bg-color);
}
</code>
</WRAP>

Was passiert hier: Im Light Mode gelten die Standardwerte aus '':root''. Sobald das Betriebssystem des Users auf Dark Mode steht, √ºberschreibt die Media Query die CSS-Variablen ‚Äì der Rest der Seite bekommt davon nichts mit und verwendet weiterhin ''var(--text-color)''.

**Testen:** Wechseln Sie in den Systemeinstellungen Ihres Computers zwischen Light und Dark Mode. Die Seite sollte automatisch reagieren ‚Äì ohne Klick, ohne JavaScript.

==== Schritt B: light-dark() Funktion einsetzen ====

Seit 2024 unterst√ºtzen alle modernen Browser die Funktion ''%%light-dark()%%''. Sie nimmt zwei Farbwerte entgegen und gibt je nach aktivem Farbschema den ersten (Light) oder den zweiten (Dark) zur√ºck.

**Wichtig:** Damit ''%%light-dark()%%'' funktioniert, muss zwingend ''%%color-scheme: light dark%%'' auf '':root'' gesetzt sein. Ohne diese Deklaration weiss der Browser nicht, welches Schema aktiv ist.

<WRAP center box round 80%>
<code css>
:root {
  /* Pflicht: Ohne diese Zeile funktioniert light-dark() nicht! */
  color-scheme: light dark;

  --text-color: light-dark(#333333, #cccccc);
  --bg-color:   light-dark(#ffffff, #1a1a1a);
  --nav-color:  light-dark(#000000, #ffffff);
}

body {
  color: var(--text-color);
  background-color: var(--bg-color);
}
</code>
</WRAP>

Der Vorteil gegen√ºber dem Media-Query-Ansatz: Beide Werte stehen direkt nebeneinander. Das macht den Code lesbarer und vermeidet doppelte Variablenbl√∂cke.

==== Schritt C: Beide Ans√§tze kombinieren ====

In der Praxis kombiniert man beide Techniken: ''%%light-dark()%%'' f√ºr die Farbdefinitionen und ''%%prefers-color-scheme%%'' als Fallback f√ºr √§ltere Browser. Das vollst√§ndige Beispiel unten zeigt, wie Sie Ihre bisherige L√∂sung mit CSS-Variablen und ''%%light-dark()%%'' umschreiben k√∂nnten:

<WRAP center box round 80%>
<code css>
/* 1. color-scheme deklarieren ‚Äì Pflicht f√ºr light-dark() */
:root {
  color-scheme: light dark;
}

/* 2. Farben mit light-dark() definieren */
:root {
  --text-color: light-dark(#1a1a1a, #f0f0f0);
  --bg-color:   light-dark(#ffffff, #1a1a1a);
  --nav-link:   light-dark(#333333, #dddddd);
}

/* 3. Fallback f√ºr Browser ohne light-dark()-Support */
@media (prefers-color-scheme: dark) {
  :root {
    --text-color: #f0f0f0;
    --bg-color:   #1a1a1a;
    --nav-link:   #dddddd;
  }
}

/* 4. Styles verwenden ‚Äì identisch wie bisher */
body {
  color: var(--text-color);
  background-color: var(--bg-color);
}

.menu li a:not(.active) {
  color: var(--nav-link);
}
</code>
</WRAP>

<WRAP center round tip 70%>
Mit diesem Ansatz brauchen Sie f√ºr den systemgesteuerten Dark Mode **kein JavaScript** mehr. Der Switch aus den Schritten 1‚Äì9 kann weiterhin existieren und zus√§tzlich einen manuellen Override erm√∂glichen ‚Äì das ist eine bewusste Designentscheidung.
</WRAP>

**Checkliste Bonusauftrag**
  * ''%%color-scheme: light dark%%'' ist auf '':root'' gesetzt.
  * ''%%light-dark()%%'' wird f√ºr mindestens Hintergrund- und Textfarbe verwendet.
  * Die Seite reagiert automatisch auf die Systemeinstellung (kein Klick n√∂tig).
  * Der bestehende JavaScript-Switch funktioniert weiterhin.